<?xml version="1.0"?>
<launch>
    <arg name="delay" default="0"/>
    <arg name="matlab_start_delay" default="$(arg delay)"/>
    <arg name="rosbag_delay" default="$(arg delay)"/>
    <arg name="velocity_start_delay" default="$(arg delay)"/>
    <arg name="bag_basename" default="20230219_y150_v090_01"/>


    <!-- <arg name="bag_path" default="/home/hayashide/catkin_ws/src/ytlab_zed/ytlab_zed_modules/rosbag/$(arg bag_basename).bag"/> -->
    <!-- <arg name="bag_path" default="/home/hayashide/catkin_ws/src/ytlab_hsr/ytlab_hsr_modules/rosbag/EtoE/$(arg bag_basename).bag"/> -->
    <arg name="bag_path" default="/media/hayashide/KIOXIA/hayashide/rosbag/0219/$(arg bag_basename).bag"/>
    <node
        pkg="rosbag" 
        name="play" 
        type="play" 
        args="$(arg bag_path)"
        launch-prefix="bash -c 'sleep $(arg rosbag_delay); $0 $@' "
    />    

    <node
        pkg="sotsuron_experiment" 
        name="velocity_plotter" 
        type="velocity_plotter.py" 
        output="screen" 
        args="$(arg bag_basename)"
        launch-prefix="bash -c 'sleep $(arg velocity_start_delay); $0 $@' "
    />

    <node pkg="sotsuron_experiment" 
        name="matlab_trigger" 
        type="matlab_trigger.py" 
        output="screen" 
        launch-prefix="bash -c 'sleep $(arg matlab_start_delay); $0 $@' "
    />

    <node pkg="rviz" type="rviz" name="rviz_ar" args="-d $(find sotsuron_experiment)/rviz/integrated_exp.rviz" />

</launch>

<!-- launch -->
<!-- integrated_exp: velocity + matlab-->
<!-- integrated_exp_runner: hsr  -->
<!-- record_zed_light: zed+rosbag -->